---
layout: default
---

<!-- Link ai file CSS e JS -->
<link rel="stylesheet" href="{{ '/assets/css/realizzazione-dettaglio.css' | relative_url }}">

<div class="realizzazione-dettaglio">
  <!-- Breadcrumb -->
  <nav class="breadcrumb">
    <a href="/">Home</a> 
    <span class="separator">›</span>
    <a href="/realizzazioni.html">Realizzazioni</a>
    <span class="separator">›</span>
    <span class="current">{{ page.nome }}</span>
  </nav>

  <div class="realizzazione-header">
    <div class="header-content">
      <div class="header-text">
        <h1>{{ page.nome }}</h1>
        <div class="realizzazione-meta">
          <p class="realizzazione-location">📍 {{ page.citta }}</p>
          <div class="tipi-badges">
            {% for tipo in page.tipo %}
              {% if tipo == 'ristorante' %}
                <span class="tipo-badge ristorante">🍽️ Ristorante</span>
              {% elsif tipo == 'pizzeria' %}
                <span class="tipo-badge pizzeria">🍕 Pizzeria</span>
              {% elsif tipo == 'bar' %}
                <span class="tipo-badge bar">☕ Bar</span>
              {% elsif tipo == 'pasticceria' %}
                <span class="tipo-badge pasticceria">🧁 Pasticceria</span>
              {% elsif tipo == 'bisteccheria' %}
                <span class="tipo-badge bisteccheria">🥩 Bisteccheria</span>
              {% elsif tipo == 'scuola alberghiera' %}
                <span class="tipo-badge scuola">🎓 Scuola Alberghiera</span>
              {% elsif tipo == 'trattoria' %}
                <span class="tipo-badge trattoria">🍝 Trattoria</span>
              {% elsif tipo == 'osteria' %}
                <span class="tipo-badge osteria">🐟 Osteria</span>
              {% elsif tipo == 'agriturismo' %}
                <span class="tipo-badge agriturismo">🌾 Agriturismo</span>
              {% elsif tipo == 'supermercato' %}
                <span class="tipo-badge supermercato">🛒 Supermercato</span>
              {% elsif tipo == 'mensa' %}
                <span class="tipo-badge mensa">🍽️ Mensa Aziendale</span>
              {% elsif tipo == 'pesce' %}
                <span class="tipo-badge pesce">🐟 Pesce</span>
              {% elsif tipo == 'orientale' %}
                <span class="tipo-badge orientale">🍣 Ristorante Orientale</span>
              {% else %}
                <span class="tipo-badge default">🏪 Locale</span>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
      {% if page.immagini and page.immagini.size > 0 %}
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">{{ page.immagini.size }}</span>
            <span class="stat-label">Foto</span>
        </div>
        <div class="stat-item">
            <span class="stat-number">💼</span>
            <span class="stat-label">Progetto</span>
        </div>
        </div>
      {% endif %}
    </div>
  </div>

  <div class="realizzazione-content">
    {% assign cartella = page.cartella_foto | default: page.nome | slugify | prepend: '/assets/img/realizzazioni/' %}
    
    <!-- Descrizione -->
    {% if page.descrizione %}
      <section class="description-section">
        <p class="realizzazione-description">{{ page.descrizione }}</p>
      </section>
    {% endif %}


    <!-- Galleria foto -->
    {% if page.immagini and page.immagini.size > 0 %}
      <section class="gallery-section">
        <div class="foto-grid">
          {% for immagine in page.immagini %}
            {% assign nome_pulito = immagine | split: '.' | first | replace: '-', ' ' | replace: '_', ' ' %}
            <div class="foto-item" onclick="openLightbox({{ forloop.index0 }})">
              <img src="{{ cartella }}/{{ immagine }}" 
                   alt="{{ page.nome }} - {{ immagine }}" 
                   class="foto-preview galleria-item"
                   loading="lazy">
              <div class="foto-overlay">
                <div class="foto-info">
                  <p class="foto-nome">{{ nome_pulito | capitalize }}</p>
                  <span class="zoom-icon">🔍</span>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </section>
    {% endif %}

    <!-- Disegno CAD -->
    {% if page.disegno_cad %}
    <section class="cad-section">
      <h2>📐 Progettazione</h2>
      <div class="cad-container">
        {% assign nome_escaped = page.nome | replace: "'", "\\'" %}
        <div class="cad-image-wrapper" onclick="openLightboxCAD('{{ cartella }}/{{ page.disegno_cad }}', 'Progettazione - {{ nome_escaped }}')">
          <img src="{{ cartella }}/{{ page.disegno_cad }}" alt="Disegno CAD - {{ page.nome }}" class="cad-image"
            loading="lazy"
            >
          <div class="cad-overlay">
            <div class="cad-info">
              <span class="cad-icon">🔍</span>
              <p class="cad-label">Clicca per ingrandire</p>
            </div>
          </div>
        </div>
        <div class="cad-description">
          <h3>Progetto tecnico</h3>
          <p>Disegno CAD della cucina professionale realizzata per <strong>{{ page.nome }}</strong> a {{ page.citta }}.</p>
        </div>
      </div>
    </section>
    {% endif %}

    <!-- Google Maps -->
    {% if page.google_maps %}
      <section class="maps-section realizzazione-mappa">
        <h2>📍 Posizione</h2>
        <div class="maps-container mappa-container">
          {% assign search_query = page.nome | append: ', ' | append: page.citta | url_encode %}
          <iframe 
            src="https://maps.google.com/maps?q={{ search_query }}&t=&z=15&ie=UTF8&iwloc=&output=embed"
            width="100%" 
            height="300" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy"
            title="Mappa di {{ page.nome }}, {{ page.citta }}">
          </iframe>
          <div class="mappa-info">
            <p><strong>{{ page.nome }}</strong></p>
            <p>📍 {{ page.citta }}</p>
          </div>
          <div class="mappa-link">
            <a href="{{ page.google_maps }}" target="_blank" rel="noopener noreferrer" class="btn-mappa">
              🗺️ Apri in Google Maps
            </a>
          </div>
        </div>
      </section>
    {% endif %}

    <!-- Lightbox -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
      <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
      <div class="lightbox-content" onclick="event.stopPropagation()">
        <img id="lightbox-image" src="" alt="">
        <div id="lightbox-description" class="lightbox-description"></div>
        
        <!-- Controlli di navigazione -->
        <button class="lightbox-nav lightbox-prev" onclick="navigateImage(-1)">&#10094;</button>
        <button class="lightbox-nav lightbox-next" onclick="navigateImage(1)">&#10095;</button>
        
        <!-- Controlli zoom e pan -->
        <!-- <div class="lightbox-controls">
          <button type="button" onclick="zoomIn()">🔍+</button>
          <button type="button" onclick="zoomOut()">🔍-</button>
          <button type="button" onclick="resetZoom()">⌂</button>
        </div> -->
        <div id="lightbox-counter" class="lightbox-counter"></div>
        
        <!-- Aiuto -->
        <div class="lightbox-help">
          <div>🖱️ Rotella: Zoom</div>
          <div>🖱️ Trascina: Sposta</div>
          <div>↕️ Frecce: Naviga</div>
          <div>2× Click: Reset</div>
        </div>
      </div>
    </div>

    

    <!-- Sezione Realizzazioni Correlate -->
    <div class="realizzazioni-correlate">
        <h3>🎯 Altre realizzazioni</h3>
        <div class="correlate-grid">
            {% assign realizzazioni_correlate = site.data.realizzazioni | where_exp: "item", "item.nome != page.nome" |
            sample: 3 %}
    
            {% for realizzazione in realizzazioni_correlate %}
            {% assign cartella_correlata = realizzazione.cartella_foto | default: realizzazione.nome | slugify | prepend:
            '/assets/img/realizzazioni/' %}
            {% assign foto_correlata = realizzazione.foto_copertina | default: 'foto1.webp' %}
    
            <div class="correlata-card">
                <div class="correlata-image">
                    <img src="{{ cartella_correlata }}/{{ foto_correlata }}" alt="{{ realizzazione.nome }}" loading="lazy">
                </div>
                <div class="correlata-info">
                    <h4>{{ realizzazione.nome }}</h4>
                    <p class="correlata-location">📍 {{ realizzazione.citta }}</p>
                    <a href="/realizzazioni/{{ realizzazione.slug | default: realizzazione.nome | slugify }}.html"
                        class="btn-correlata">Vedi dettagli</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Torna alla galleria -->
    <div class="realizzazione-footer">
      <a href="/realizzazioni.html" class="btn-back">
        ← Torna alla galleria
      </a>
    </div>
  </div>
</div>

<!-- Link al JavaScript -->
<script src="{{ '/assets/js/lightbox.js' | relative_url }}"></script>
